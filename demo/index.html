<!DOCTYPE html>
<html>
	<head>
		<title>jBinary.Repo demo</title>
		<script data-main="demo" src="//cdnjs.cloudflare.com/ajax/libs/require.js/2.1.8/require.min.js"></script>
		<script id="data-info" type="text/html">
			<!-- ko if: value instanceof Object && !(value instanceof Date) -->
				<!-- ko if: value !== $root.data() -->
					<input type="checkbox" data-bind="checked: $data.isOpen = $data.isOpen || ko.observable(false), visible: !(value instanceof Function)" />
					<b data-bind="text: value.constructor.name + ('length' in value ? '[' + value.length + ']' : '')"></b>
				<!-- /ko -->
				<!-- ko if: value === $root.data() || isOpen() -->
					<ul data-bind="foreach: $root.object2array(value)">
						<li>
							<b data-bind="text: key + ': '"></b>
							<span data-bind="template: {name: 'data-info', data: {key: key, value: value instanceof Function && value['jBinary.Lazy'] ? value() : value}}"></span>
						</li>
					</ul>
				<!-- /ko -->
			<!-- /ko -->
			<!-- ko ifnot: value instanceof Object && !(value instanceof Date) -->
				<!-- ko text: ko.utils.stringifyJson(value) --><!-- /ko -->
			<!-- /ko -->
			<!-- ko template: $root.template --><!-- /ko -->
		</script>
		<style>
			ul {
				list-style: none;
			}

			#fileSection {
				padding-bottom: 2pt;
			}

			#linksSection {
				display: inline-block;
				margin-top: 0;
				padding-left: 0;
				vertical-align: top;
				list-style-type: none;
			}

			.no-ko #main {
				display: none;
			}

			#typeSection {
				float: right;
			}
		</style>
	</head>
	<body class="no-ko" data-bind="css: {'no-ko': false}">
		<div id="typeSection">
			File type:
			<select data-bind="optionsCaption: 'Select typeset', options: associations().list, value: type" id="typeSelect">
				<option>Loading list...</option>
			</select>
		</div>
		<div id="main" data-bind="visible: type">
			<div id="fileSection" data-bind="if: typeof File !== 'undefined'">
				<label for="file">Choose <span data-bind="text: type"></span> file: </label><input type="file" data-bind="event: {change: loadFromFile}" /><br />
				<small>or</small>
			</div>
			Load <span data-bind="text: type"></span> sample:
			<ul id="linksSection" data-bind="click: loadFromLink, clickBubble: false, foreach: config().files">
				<li>
					<a data-bind="text: $data, attr: {href: $root.type() + '/' + $data}"></a>
				</li>
			</ul>
			<hr />
			<div data-bind="visible: data, template: {name: 'data-info', data: {key: 'Root', value: data()}}"></div>
		</div>
	</body>
</html>